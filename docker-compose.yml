services:
  agent-backend:
    build:
      context: ./backend-python
    env_file: ./backend-python/.env
    ports:
      - "8001:8001"
    restart: unless-stopped

  gateway:
    build:
      context: .
      dockerfile: backend-node/Dockerfile
    env_file: ./backend-node/.env
    environment:
      - PYTHON_BACKEND_URL=http://agent-backend:8001
      - PORT=3001
    ports:
      - "3001:3001"
    depends_on:
      - agent-backend
    restart: unless-stopped
